!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.bugcatch=t():e.bugcatch=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{init:()=>ee,recordEvent:()=>$});var n={t:!1,i:!1,o:3e4},r=window,a=r.console,o=document,i=r.navigator,c=r.performance,s=function(){return i.deviceMemory},u=function(){return i.hardwareConcurrency},l=function(){return c&&!!c.getEntriesByType&&!!c.now&&!!c.mark},f="4g",d=!1,m=function(){return!!(u()&&u()<=4)||!!(s()&&s()<=4)},v=function(e,t){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return m()||t}},p={u:!1},g=function(e){o.hidden&&(e(),p.u=o.hidden)},y=function(e){return parseFloat(e.toFixed(4))},b=function(e){return"number"!=typeof e?null:y(e/Math.pow(1024,2))},h=[2e3,4e3],k=[2500,4e3],w=[.1,.25],T={ttfb:[200,500],fp:h,fcp:h,lcp:k,lcpFinal:k,fid:[100,300],cls:w,clsFinal:w,tbt:[300,600]},E=function(e,t){return T[e]?t<=T[e][0]?"good":t<=T[e][1]?"needsImprovement":"poor":null},S=function(e,t,a){var o;o=function(){p.u&&e.indexOf("Final")<0||!n.analyticsTracker||n.analyticsTracker({metricName:e,data:t,eventProperties:a||{},navigatorInformation:i?{deviceMemory:s()||0,hardwareConcurrency:u()||0,serviceWorkerStatus:"serviceWorker"in i?i.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:m(),isLowEndExperience:v(f,d)}:{},vitalsScore:E(e,t)})},"requestIdleCallback"in r?r.requestIdleCallback(o,{timeout:3e3}):o()},_=function(e,t,n){Object.keys(t).forEach((function(e){"number"==typeof t[e]&&(t[e]=y(t[e]))})),S(e,t,n)},I=function(e,t,r){var a=y(e);a<=n.o&&a>=0&&S(t,a,r)},j={},O={value:0},q={value:0},B={value:0},C={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},x={value:0},D=function(e){var t=e.pop();t&&!t.s&&t.value&&(O.value+=t.value)},M={},P=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){a.warn("Perfume.js:",e)}return null},R=function(e){M[e]&&M[e].disconnect(),delete M[e]},F=function(e){var t=e.pop();t&&I(t.processingStart-t.startTime,"fid",{performanceEntry:t}),R(1),I(B.value,"lcp"),M[3]&&"function"==typeof M[3].takeRecords&&M[3].takeRecords(),I(O.value,"cls"),setTimeout((function(){I(x.value,"tbt"),_("dataConsumption",C.value)}),1e4)},L=function(e){e.forEach((function(e){if(!("self"!==e.name||e.startTime<q.value)){var t=e.duration-50;t>0&&(x.value+=t)}}))},N=function(e){e.forEach((function(e){"first-paint"===e.name?I(e.startTime,"fp"):"first-contentful-paint"===e.name&&(q.value=e.startTime,I(q.value,"fcp"),M[4]=P("longtask",L),R(0))}))},W=function(e){var t=e.pop();t&&(B.value=t.renderTime||t.loadTime)},V=function(e){e.forEach((function(e){e.identifier&&I(e.startTime,e.identifier)}))},z=function(e){e.forEach((function(e){if(n.t&&_("resourceTiming",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;C.value[e.initiatorType]+=t,C.value.total+=t}}))},H=function(){M[2]&&(I(B.value,"lcpFinal"),R(2)),M[3]&&("function"==typeof M[3].takeRecords&&M[3].takeRecords(),I(O.value,"clsFinal"),R(3))},J=function(e){var t="usageDetails"in e?e.usageDetails:{};_("storageEstimate",{quota:b(e.quota),usage:b(e.usage),caches:b(t.caches),indexedDB:b(t.indexedDB),serviceWorker:b(t.serviceWorkerRegistrations)})},U=function(){function e(e){if(void 0===e&&(e={}),this.l="6.2.0",n.analyticsTracker=e.analyticsTracker,n.t=!!e.resourceTiming,n.i=!!e.elementTiming,n.o=e.maxMeasureTime||n.o,l()){"PerformanceObserver"in r&&(M[0]=P("paint",N),M[1]=P("first-input",F),M[2]=P("largest-contentful-paint",W),n.t&&P("resource",z),M[3]=P("layout-shift",D),n.i&&P("element",V)),void 0!==o.hidden&&o.addEventListener("visibilitychange",g.bind(this,H));var t=function(){if(!l())return{};var e=c.getEntriesByType("navigation")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();_("navigationTiming",t),t.timeToFirstByte&&I(t.timeToFirstByte,"ttfb"),_("networkInformation",function(){if("connection"in i){var e=i.connection;return"object"!=typeof e?{}:(f=e.effectiveType,d=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),i&&i.storage&&"function"==typeof i.storage.estimate&&i.storage.estimate().then(J)}}return e.prototype.start=function(e){l()&&!j[e]&&(j[e]=!0,c.mark("mark_"+e+"_start"),p.u=!1)},e.prototype.end=function(e,t){void 0===t&&(t={}),l()&&j[e]&&(c.mark("mark_"+e+"_end"),delete j[e],_(e,y(function(e){c.measure(e,"mark_"+e+"_start","mark_"+e+"_end");var t=c.getEntriesByName(e).pop();return t&&"measure"===t.entryType?t.duration:-1}(e)),t))},e.prototype.endPaint=function(e,t){var n=this;setTimeout((function(){n.end(e,t)}))},e.prototype.clear=function(e){delete j[e],c.clearMarks&&(c.clearMarks("mark_"+e+"_start"),c.clearMarks("mark_"+e+"_end"))},e}();const X=U;var A=function(e,t,n){return{type:e,data:t,release:n.release,location:window.location.href}},G=function(e,t){try{var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t))}catch(e){console.error("[Bug Catch] XHR Error:",e)}},K={};window.requestIdleCallback=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)};var Q={base_url:"",release:"0.0.0",logEvents:!1,disableWebVitals:!1,disableError:!1,disableUnhandledRejection:!1,requiredVitals:["cls","fcp","fid","fp","lcp","navigationTiming","navigatorInformation","networkInformation","storageEstimate","tbt","ttfb"]},Y=function(e){Object.assign(Q,e)},Z=function(e){var t={};if(e.error)t.type=e.type,t.message=e.message,t.filename=e.filename,t.line=e.lineno||-1,t.column=e.colno||-1,t.error={name:e.error.name,message:e.error.message,stack:e.error.stack};else{t.type=e.type,t.message=e.reason.message,t.filename="",t.line=-1,t.column=-1,t.error={name:e.reason.name,message:e.reason.message,stack:e.reason.stack};var n=(/:[0-9]+:[0-9]+/.exec(e.reason.stack)||[""])[0].split(":");3===n.length&&(t.line=Number(n[1]),t.column=Number(n[2]))}return G("".concat(Q.base_url,"/catch/event"),A("error",t,Q)),!0},$=function(e,t,n){Y(n),Q.logEvents&&console.log("[Bug Catch] Event: ".concat(e),{name:e,data:t}),G("".concat(Q.base_url,"/event"),A(e,t,Q))},ee=function(e){Y(e),Q.disableError||window.addEventListener("error",Z),Q.disableUnhandledRejection||window.addEventListener("unhandledrejection",Z),Q.disableWebVitals||function(e){var t=JSON.parse(window.localStorage.getItem("bug-catch/vitals"));if(t&&t.release===e.release&&(Date.now()-t.lastSent)/36e5/24<14)return e.logEvents&&console.log("[Bug Catch] web-vitals limit has been reached"),!1;new X({analyticsTracker:function(t){var n,r=t.metricName,a=t.data,o=t.navigatorInformation;K.navigatorInformation||(K.navigatorInformation=o),K[r]=a,Object.keys(K).length>=e.requiredVitals.length&&(n=!0,e.requiredVitals.forEach((function(e){K.hasOwnProperty(e)||(n=!1)})),n)&&requestIdleCallback((function(){return function(e,t){if(e.hasSent)return!1;e.hasSent=!0,t.logEvents&&console.log("[Bug Catch] Web-Vitals data",e),G("".concat(t.base_url,"/catch/vitals"),A("vitals",e,t)),window.localStorage.setItem("bug-catch/vitals",JSON.stringify({lastSent:Date.now(),release:t.release}))}(K,e)}))}})}(Q)};return t})()}));